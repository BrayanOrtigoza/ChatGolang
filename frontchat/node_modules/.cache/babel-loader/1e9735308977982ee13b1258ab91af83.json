{"ast":null,"code":"import _classCallCheck from \"/home/developermensajeros/Documentos/Go/src/Chat3.0/frontchat/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/developermensajeros/Documentos/Go/src/Chat3.0/frontchat/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/developermensajeros/Documentos/Go/src/Chat3.0/frontchat/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/developermensajeros/Documentos/Go/src/Chat3.0/frontchat/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/developermensajeros/Documentos/Go/src/Chat3.0/frontchat/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/developermensajeros/Documentos/Go/src/Chat3.0/frontchat/src/components/message/index.js\";\nimport React, { Component } from 'react';\nimport fecha from 'fecha';\nimport { postService } from \"../../services/services\";\nimport { Routes } from \"../../services/routes\";\nimport Socket from \"./../socket/socket\";\n\nvar Message =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Message, _Component);\n\n  function Message(props) {\n    var _this;\n\n    _classCallCheck(this, Message);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Message).call(this, props));\n    _this.state = {\n      body: '',\n      arrayMessage: []\n    };\n    return _this;\n  }\n\n  _createClass(Message, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      console.log(this.props.Messages);\n      /*this.setState({\n          arrayMessage:this.props.Messages,\n      });*/\n    } // Called only once after the Component is rendered\n\n    /*componentDidMount() {\n        let ws = new WebSocket('ws://localhost:4000')\n        let socket = new Socket(ws);\n        socket.on('message add', this.onMessageAdd.bind(this));\n    }\n       onMessageAdd(message) {\n        console.log(message)\n        this.props.Messages.push(message);\n    }\n    */\n\n  }, {\n    key: \"MakeMessage\",\n    value: function MakeMessage() {\n      var _this2 = this;\n\n      var token = localStorage.getItem('@websession');\n      var headers = {\n        Authorization: 'Bearer ' + token,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      };\n      var body = {\n        message: this.state.body,\n        id_people_message: this.props.Id_people\n      };\n      postService(Routes.MAKEMESSAGE, body, headers).then(function (data) {\n        console.log(data);\n\n        _this2.setState({\n          body: ''\n        });\n      }, function () {\n        return _this2.props.openWebsocket;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"mesgs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"msg_history\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.props.Messages.map(function (element, index) {\n        var createdAt = fecha.format(new Date(element.createdAt), 'DD/MM HH:mm:ss');\n\n        if (element.id_people_message === _this3.props.Id_people) {\n          return React.createElement(\"div\", {\n            className: \"incoming_msg\",\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"incoming_msg_img\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: \"https://ptetutorials.com/images/user-profile.png\",\n            alt: \"sunil\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"received_msg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"received_withd_msg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"time_date\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }, element.author), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          }, element.message), React.createElement(\"span\", {\n            className: \"time_date\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80\n            },\n            __self: this\n          }, createdAt))));\n        } else {\n          return React.createElement(\"div\", {\n            className: \"outgoing_msg\",\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"sent_msg\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"time_date\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88\n            },\n            __self: this\n          }, element.author), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }, element.message), React.createElement(\"span\", {\n            className: \"time_date\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90\n            },\n            __self: this\n          }, createdAt)));\n        }\n      })), React.createElement(\"div\", {\n        className: \"type_msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input_msg_write\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"write_msg\",\n        placeholder: \"Escribe Un Mensaje\",\n        value: this.state.body,\n        onChange: function onChange(e) {\n          return _this3.setState({\n            body: e.target.value\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this3.MakeMessage();\n        },\n        className: \"msg_send_btn\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-paper-plane-o\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Message;\n}(Component);\n\nexport default Message;","map":{"version":3,"sources":["/home/developermensajeros/Documentos/Go/src/Chat3.0/frontchat/src/components/message/index.js"],"names":["React","Component","fecha","postService","Routes","Socket","Message","props","state","body","arrayMessage","console","log","Messages","token","localStorage","getItem","headers","Authorization","message","id_people_message","Id_people","MAKEMESSAGE","then","data","setState","openWebsocket","map","element","index","createdAt","format","Date","author","e","target","value","MakeMessage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport fecha from 'fecha';\nimport {postService} from \"../../services/services\";\nimport {Routes} from \"../../services/routes\";\nimport Socket from \"./../socket/socket\";\n\n\nclass Message extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            body: '',\n            arrayMessage:[],\n        }\n    }\n\n    componentWillMount() {\n        console.log(this.props.Messages)\n        /*this.setState({\n            arrayMessage:this.props.Messages,\n        });*/\n    }\n\n    // Called only once after the Component is rendered\n    /*componentDidMount() {\n        let ws = new WebSocket('ws://localhost:4000')\n        let socket = new Socket(ws);\n        socket.on('message add', this.onMessageAdd.bind(this));\n    }\n\n\n\n    onMessageAdd(message) {\n        console.log(message)\n        this.props.Messages.push(message);\n    }\n*/\n\n\n\n    MakeMessage(){\n        let token = localStorage.getItem('@websession');\n\n        let headers = {\n            Authorization: 'Bearer ' + token,\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n        };\n\n        let body = {\n            message: this.state.body,\n            id_people_message: this.props.Id_people,\n        };\n\n        postService(Routes.MAKEMESSAGE, body, headers).then(data => {\n           console.log(data);\n\n            this.setState({\n                body:''\n            })\n        },()=> this.props.openWebsocket)\n    }\n\n    render() {\n        return (\n            <div className=\"mesgs\">\n                <div className=\"msg_history\">\n                    {this.props.Messages.map((element, index) => {\n                        let createdAt = fecha.format(new Date(element.createdAt), 'DD/MM HH:mm:ss');\n                        if (element.id_people_message === this.props.Id_people){\n                            return(\n                                <div className=\"incoming_msg\" key={index}>\n                                    <div className=\"incoming_msg_img\"><img\n                                        src=\"https://ptetutorials.com/images/user-profile.png\" alt=\"sunil\"/></div>\n                                    <div className=\"received_msg\">\n                                        <div className=\"received_withd_msg\">\n                                            <span className=\"time_date\">{element.author}</span>\n                                            <p>{element.message}</p>\n                                            <span className=\"time_date\">{createdAt}</span></div>\n                                    </div>\n                                </div>\n                            )\n                        }else{\n                            return(\n                            <div  className=\"outgoing_msg\" key={index}>\n                                <div className=\"sent_msg\">\n                                    <span className=\"time_date\">{element.author}</span>\n                                    <p>{element.message}</p>\n                                    <span className=\"time_date\">{createdAt}</span></div>\n                            </div>\n                            )\n                        }\n                    })}\n                </div>\n                <div className=\"type_msg\">\n                    <div className=\"input_msg_write\">\n                        <input type=\"text\" className=\"write_msg\" placeholder=\"Escribe Un Mensaje\"\n                               value={this.state.body}\n                               onChange={(e) => this.setState({\n                                   body: e.target.value\n                               })}\n                        />\n                        <button onClick={()=>this.MakeMessage()} className=\"msg_send_btn\" type=\"button\"><i className=\"fa fa-paper-plane-o\"\n                                                                          aria-hidden=\"true\"/></button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}